<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>404 Not Found</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="icon"
      href="https://cdn.glitch.global/76a1f4d2-2815-4fbf-afcd-888d6db7e806/icon.png?v=1749463611859"
      type="image/png"
    />
    <link
      rel="icon"
      href="https://cdn.glitch.global/76a1f4d2-2815-4fbf-afcd-888d6db7e806/icon.ico?v=1749512639750"
      type="image/x-icon"
    />
    <style>
      #hiddenErrorText {
        display= none;
      }
    </style>
  </head>
  <body>
    <header>_tonkatsu_ / tonkatsu0211のマイページ</header>

    <div class="nav">
      <a href="my.html">自己紹介</a>
      <a href="projects.html">作品</a>
      <a href="contact.html">連絡先</a>
      <a href="updates.html">更新履歴</a>
      <a href="beforeBreak.html">履歴破壊</a>
      <a href="error.html" class="active">404</a>
    </div>

    <div class="main">
      <img
        src="https://cdn.glitch.global/76a1f4d2-2815-4fbf-afcd-888d6db7e806/Not Found.png?v=1749532095238"
        width="1000"
      />
      <h1 id="text">このページはURLが変更されたか存在しません。</h1>
      <h3 id="error"></h3>
      <h3 id="hiddenErrorText">
        あなた、意図的にこのサイトにアクセスしたか404のタブをクリックしましたね?ご褒美に履歴を埋め尽くしてあげます。
      </h3>
      <h2>
        <button onclick="location.href='index.html'" class="blueButton30">
          トップページに戻る
        </button>
      </h2>
    </div>
  </body>
  <footer>
    <p>CC BY-NC-SA 4.0</p>
    <p>&copy; _tonkatsu_ / tonkatsu0211 All rights reserved.</p>
  </footer>
</html>

<script>
  const params = new URLSearchParams(window.location.search);
  const e = params.get("e");
  const accessURL = `${location.origin}/${e}`;
  document.getElementById(
    "error"
  ).textContent = `アクセスしたURL: ${accessURL}`;

  if (!e) {
    document.getElementById("hiddenErrorText").style.display = "inline";
    document.getElementById("error").style.display = "none";
    document.getElementById("text").textContent = "意☆味☆不☆明☆";

    function changeUrl() {
      const randomStr = Math.random().toString(36).substring(2, 8);
      const newUrl =
        window.location.origin + window.location.pathname + "?id=" + randomStr;
      window.history.pushState({}, "", newUrl);
    }

    setInterval(changeUrl, 200);
  } else {
    document.getElementById("hiddenErrorText").style.display = "none";
    document.getElementById("error").style.display = "inline";
  }
</script>
